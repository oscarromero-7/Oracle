--PASO 1: ELIMINAR LOS CONSTRAINT PK - FK SI LA COLUMA QUE ESTAMOS TRABAJANDO ES PK DE LA TABLA
ALTER TABLE MATRICULA
DROP CONSTRAINT MATRICULA_CEDULA_FK


ALTER TABLE ESTUDIANTES
DROP PRIMARY KEY

--PASO 2: RENOMBRAR EL NOMBRE DE LA COLUMNAS
ALTER TABLE ESTUDIANTES
RENAME COLUMN CEDULA TO CEDULA2


ALTER TABLE MATRICULA
RENAME COLUMN CEDULA TO CEDULA2


--PASO 3: CREAR UNA NUEVA COLUMNA CON EL NUEVO TIPO DE DATO
ALTER TABLE ESTUDIANTES
ADD CEDULA VARCHAR2(12)


ALTER TABLE MATRICULA
ADD CEDULA VARCHAR2(12)


--PASO 4: Mover (con UPDATE) el valor de la CEDULA2 (campo anterior) al nuevo campo CEDULA
UPDATE ESTUDIANTES 
SET CEDULA = TO_CHAR(CEDULA2)



UPDATE MATRICULA
SET CEDULA = TO_CHAR(CEDULA2)

--PASO 5: MARCAR LA COLUMNA CEDULA2 COMO UNUSED
ALTER TABLE ESTUDIANTES
SET UNUSED (CEDULA2)


ALTER TABLE MATRICULA
SET UNUSED(CEDULA2)



--PASO 6: Volver a crear la PK sobre la columna nueva de CEDULA de ESTUDIANTES
ALTER TABLE ESTUDIANTES
ADD CONSTRAINT ESTUDIANTES_CEDULA_PK PRIMARY KEY (CEDULA)



--PASO 7: Definir la nueva columna CEDULA en MATRICULA como NOT NULL.
ALTER TABLE MATRICULA
MODIFY CEDULA NOT NULL



--PASO 8: Agregar el constraint entre las tablas ESTUDIANTES y MATRICULA
ALTER TABLE MATRICULA
ADD CONSTRAINT MATRICULA_CEDULA_FK FOREIGN KEY (CEDULA) REFERENCES ESTUDIANTES (CEDULA)




--EJERCICIO 6
ALTER TABLE ESTUDIANTES DROP UNUSED COLUMNS
/
ALTER TABLE MATRICULA DROP UNUSED COLUMNS
/




