CREATE MATERIALIZED VIEW V_ARTICULOS
BUILD IMMEDIATE
REFRESH ON DEMAND
ENABLE QUERY REWRITE
AS
SELECT *
FROM B_ARTICULOS
-- CREAMOS LA VISTA MATERIALIZADA

INSERT INTO B_ARTICULOS (ID, NOMBRE, UNIDAD_MEDIDA, PRECIO, COSTO, PORC_IVA, PORC_COMISION, STOCK_ACTUAL, STOCK_MINIMO) VALUES (
127,'PRUEBA','METROS',10000,6000, 0.1, 0.5, 12, 1)
--INSERTAMOS UN NUEVO ARTICULO

SELECT COUNT(*) FROM B_ARTICULOS
/

SELECT COUNT(*) FROM V_ARTICULOS
/
--COMPARAMOS  VEMOS QUE LA VISTA NO ESTA ACTUALIZADA YA QUE EL REFRESH ESTA POR DEMANDA

--EXECUTE DBMS_MVIEW.REFRESH('V_ARTICULOS', 'c')
--UNA VES QUE HACEMOS REFRESH MANUALMENTE VEMOS QUE COINCIDDEN LOS DATOS